  
 <!DOCTYPE html>
<html >

<head>
  <meta charset="UTF-8">
   <title>Book club</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
   
</head>

<body translate="no" >

<script src="https://fb.me/react-0.14.3.js"></script>
<script src="https://fb.me/react-dom-0.14.3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<script type="text/babel">


function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

var Input = React.createClass({

  getInitialState: function() {
    return {value: this.props.value};
  },

  handleChange: function(event) {
    this.setState({value: event.target.value});
  },


render: function () {
  return (
      <input
        type={this.props.type}
        value={this.state.value}
        onChange={this.handleChange}
        id={this.props.id}
        name={this.props.name}
        placeholder={this.props.placeholder}
        className={this.props.className}
      />
    );
}

});

var Container = React.createClass({
 
  getInitialState: function () {
  var str=window.location.href;
str=str.split("//")[1];
str=str.split("/")[1];
    return { 
            page:str

           };
  },

  change: function(evt){

 window.history.pushState("", evt.target.value, "/"+evt.target.id);
  	this.setState({ page: evt.target.id});
  },
  
  logout: function(evt){

 window.location.href="/logout";
  },
  
  render: function () {

  $(function() {
         
   console.log("oi");

    $("button#change.btn.btn-success").on("click", function() {
    console.log(oi);
    });    

  });

  var user=getCookie("user");

  console.log(this.state.page);
          return (
          <div className="cont">
          	 <div className="navbar">
<h3>BookClub</h3>

<div id="btnsnav">

{() => {

if(user=="undefined")
return<div className="btnnav" onClick={this.change} id="signup">Sign up</div>
}()}

{() => {
console.log(user);

if(user=="undefined")
return<div className="btnnav" onClick={this.change} id="login">Login</div>
else
return<div className="btnnav" onClick={this.logout} id="logout">Logout</div>


}()}

{() => {
if(user!=="undefined")
return<div className="btnnav" onClick={this.change} id="settings">Settings</div>
}()}

{() => {
if(user!=="undefined")
return<div className="btnnav" onClick={this.change} id="books">Books</div>
}()}

{() => {
if(user!=="undefined")
return<div className="btnnav" onClick={this.change} id="dashboard">Dashboard</div>
}()}


<div className="btnnav" onClick={this.change} id="home">Home</div>
</div>
</div>

{() => {
          if(this.state.page=="" || this.state.page=="home"){
          return<div className="cont"><div className="header"><h2>BookClub</h2><img className="icon" src="book-outline.png" width="100" height="100" /></div>
  
<div className="page">

<div className="feat">Books cataloque</div>
<div className="feat">Exchange books</div>
<div className="feat">Personal dashboard</div>

</div></div>
}else

          if(this.state.page=="login"){
       
          return<form className="form" action="/signin" method="post">

          <div id="log" className="form-group">

          <input type="email" name="email" placeholder="Email" id="form-email1" className="form-control" />
          </div>

          <div className="form-group">

         <Input type="password" placeholder="Password" value="" className="form-control"
           name="password" />
       </div>
       <button type="submit" className="btn btn-primary">
          Sign up
       </button>
          </form>
          }else if(this.state.page=="signup"){
          
          return<form className="form" action="/register" method="post">

          <div id="reg" className="form-group">
          <Input type="text" id="name" name="name" placeholder="Full name" value="" className="form-control" />
          </div>

          <div className="form-group">

          <input type="email" name="email" placeholder="Email" className="form-control" />
          </div>

          <div className="form-group">

         <input type="password" placeholder="Password" className="form-control"
           name="password" />
       </div>
       <button type="submit" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Processing Order" className="btn btn-primary">
          Registrer
       </button>
          </form>
          }else if(this.state.page=="settings" && user!=="undefined"){
          
          return(<div>
          <form className="form" action="/update" method="post">
          <h2 style={{color:"black!important"}}>Update profile</h2>
          <div className="form-group">
          <Input type="text" id="name" name="name" placeholder="Full name" value={user} className="form-control" />
          </div>

          <div className="form-group">
          <input type="text" name="country" placeholder="Country" className="form-control" />
          </div>

          <div className="form-group">
          <input type="text" name="town" placeholder="Town" className="form-control" />
          </div>

       <button type="submit" className="btn btn-success">
          Update
       </button>
          </form>
          <form className="form" action="/changepass" method="post">

          <h2 style={{color:"black!important"}}>Change password</h2>

          <div className="form-group">
         <input type="password" placeholder="old password" className="form-control"
           name="oldpassword" />
          </div>

          <div className="form-group">
         <input type="password" placeholder="new password" className="form-control"
           name="newpassword" />
          </div>

       
          </form>
          <button type="submit" id="change" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Processing Order" className="btn btn-success">
          Change
       </button>
          </div>)
          }
}()}
          </div>
		
		)

}
  
});

ReactDOM.render(<Container />, document.getElementById('cont'));

</script>

  
<div id="cont"></div>

</body>
</html>
